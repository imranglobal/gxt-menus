gxt-menus
=========

This plugin will ensure better caching around the final markup of the menus. Also adds extra ability to configure the cache that is generated by this plugin.

This plugin enables a drop in replacement for [wp_nav_menu()](http://codex.wordpress.org/Function_Reference/wp_nav_menu) by using gxt_nav_menu(). 



###Usage:
```
$args = array( 
              'theme_location' => 'primary', 
              'items_wrap' => '<ul><li id="item-id">Menu: </li>%3$s</ul>'
              );
gxt_nav_menu( $args );
              
```

###Additional parameters:
Alongside the regular parameters of [wp_nav_menu()](http://codex.wordpress.org/Function_Reference/wp_nav_menu) there are 2 additional parameters that can be passed into gxt_nav_menu().

```
$args = array(
              ...                          // Regular wp_nav_menu() args
              'vary_by_url'    => TRUE,
              'vary_by_key'    => FALSE
        );

```

#####$vary_by_url

This parameter ensures that a new menu cache is generated for URLs on which this is set to TRUE. Best caching results are achieved when set to FALSE (i.e. same menu cache is shared across the site). Can be set to TRUE conditionally too.
 

**Example:** New cache on category pages only
```
...
$args['vary_by_url'] = is_category() ? TRUE : FALSE;
gxt_nav_menu( $args );
```

**Example:** New cache on custom taxonomy & tag pages only
```
...
$args['vary_by_url'] = is_tax( 'person' ) || is_tag() ? TRUE : FALSE;
gxt_nav_menu( $args );
```

If *$vary_by_url* is not explicitally set, by default it will generate new cache when any one of is_home(), is_category(), is_tag() & is_page() returns TRUE.

**Note:** Setting this to TRUE for is_single() OR is_singular() may create a large cache footprint.

#####$vary_by_key

Some Wordpress installs are set up to display different pages based on cookies, user-agents etc. Pass those values into this parameter.

```
$args['vary_by_key'] = $_COOKIE['location'];
// OR
$args['vary_by_key'] = $_SERVER['HTTP_USER_AGENT'];
```


